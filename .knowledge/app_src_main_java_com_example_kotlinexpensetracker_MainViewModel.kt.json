{"is_source_file": true, "format": "Kotlin", "description": "This file defines the MainViewModel class responsible for managing date-based and transaction data state in an expense tracker app. It manages current month selection, filtered transaction lists, and aggregate totals like income, expenses, and balance, with support for navigation between months. The ViewModel interacts with repositories for data retrieval and updates, leveraging Kotlin coroutines and flow operators for reactive state management.", "external_files": ["com.example.kotlinexpensetracker.domain.CategoriesRepository", "com.example.kotlinexpensetracker.domain.CategoryEntry", "com.example.kotlinexpensetracker.domain.ITransactionsRepository", "com.example.kotlinexpensetracker.domain.InMemoryTransactionsRepository", "com.example.kotlinexpensetracker.domain.Item", "com.example.kotlinexpensetracker.utils.DateUtils", "kotlinx.coroutines.flow.MutableStateFlow", "kotlinx.coroutines.flow.SharingStarted", "kotlinx.coroutines.flow.StateFlow", "kotlinx.coroutines.flow.combine", "kotlinx.coroutines.flow.map", "kotlinx.coroutines.flow.stateIn"], "external_methods": ["DateUtils.currentMonthId()", "DateUtils.formatMonthLabel(String)", "DateUtils.isSameMonth(String, String)", "DateUtils.formatIsoDate(Date)", "DateUtils.getPreviousMonth(String)", "DateUtils.getNextMonth(String)"], "published": ["MainViewModel"], "classes": [{"name": "MainViewModel", "description": "A ViewModel class that manages expense tracker state including current month, filtered transactions, and aggregated totals. It provides navigation methods for months, methods to add/update/delete transactions, and access to category data."}], "methods": [{"name": "goToPreviousMonth", "description": "Navigates to the previous month using DateUtils."}, {"name": "goToNextMonth", "description": "Navigates to the next month using DateUtils."}, {"name": "setCurrentMonth", "description": "Sets the current month based on a provided yyyy-MM string; throws if invalid."}, {"name": "addItem", "description": "Adds a new transaction item to the repository asynchronously."}, {"name": "updateItem", "description": "Updates an existing transaction item in the repository asynchronously."}, {"name": "deleteItem", "description": "Deletes a transaction item from the repository asynchronously by its id."}, {"name": "getCategory", "description": "Retrieves category details by categoryId."}, {"name": "getAllCategories", "description": "Returns a list of all categories."}], "calls": ["CategoriesRepository.getById", "transactionsRepository.add", "transactionsRepository.update", "transactionsRepository.delete", "DateUtils.currentMonthId", "DateUtils.formatMonthLabel", "DateUtils.isSameMonth", "DateUtils.formatIsoDate", "DateUtils.getPreviousMonth", "DateUtils.getNextMonth"], "search-terms": ["MainViewModel", "currentMonthId", "monthly aggregation", "transaction filtering", "month navigation", "balance calculation", "Kotlin coroutines flow", "expense tracker ViewModel"], "state": 2, "file_id": 28, "knowledge_revision": 79, "git_revision": "26fab4f7155693310d1eef442a3253d0687da5a9", "revision_history": [{"65": ""}, {"69": "9a2edb4f52c7a3906bf8afe933c196e1d0238b6b"}, {"79": "26fab4f7155693310d1eef442a3253d0687da5a9"}], "hash": "a6d80826244b24799487808c523916f9", "format-version": 4, "code-base-name": "kotlin-expense-tracker", "filename": "app/src/main/java/com/example/kotlinexpensetracker/MainViewModel.kt"}