{"is_source_file": true, "format": "Kotlin", "description": "This Kotlin file defines the MainViewModel class, which manages state and data operations for an expense tracker app. It handles current month selection, filtering transactions by month, calculating total income, expenses, and balance, as well as providing methods for navigation and item management. The ViewModel interacts with repositories and utility functions to build reactive data streams for the UI.", "external_files": ["com.example.kotlinexpensetracker.domain.CategoriesRepository", "com.example.kotlinexpensetracker.domain.CategoryEntry", "com.example.kotlinexpensetracker.domain.ITransactionsRepository", "com.example.kotlinexpensetracker.domain.InMemoryTransactionsRepository", "com.example.kotlinexpensetracker.domain.Item", "com.example.kotlinexpensetracker.utils.DateUtils", "kotlinx.coroutines.flow.MutableStateFlow", "kotlinx.coroutines.flow.SharingStarted", "kotlinx.coroutines.flow.StateFlow", "kotlinx.coroutines.flow.combine", "kotlinx.coroutines.flow.map", "kotlinx.coroutines.flow.stateIn", "kotlinx.coroutines.launch"], "external_methods": ["DateUtils.currentMonthId()", "DateUtils.formatMonthLabel(String)", "DateUtils.isSameMonth(String, String)", "DateUtils.formatIsoDate(Date)", "DateUtils.getPreviousMonth(String)", "DateUtils.getNextMonth(String)"], "published": ["MainViewModel"], "classes": [{"name": "MainViewModel", "description": "A ViewModel managing expense tracking data, including current month, filtered transactions, total income, expenses, and balance calculations. It provides methods for navigating months, adding, updating, and deleting items, and retrieving category details."}], "methods": [{"name": "goToPreviousMonth", "description": "Navigates to the previous month by updating the currentMonthId state."}, {"name": "goToNextMonth", "description": "Navigates to the next month by updating the currentMonthId state."}, {"name": "setCurrentMonth", "description": "Sets the current month id directly, validating the input."}, {"name": "addItem", "description": "Adds a new item to the transactions repository asynchronously."}, {"name": "updateItem", "description": "Updates an existing item in the repository asynchronously."}, {"name": "deleteItem", "description": "Deletes an item from the repository by id asynchronously."}, {"name": "getCategory", "description": "Retrieves category details by category ID."}, {"name": "getAllCategories", "description": "Returns all available categories from the repository."}], "calls": ["DateUtils.currentMonthId()", "DateUtils.formatMonthLabel(it)", "DateUtils.isSameMonth(iso, monthId)", "CategoriesRepository.getById(item.categoryId)", "transactionsRepository.items", "transactionsRepository.add(item)", "transactionsRepository.update(item)", "transactionsRepository.delete(id)"], "search-terms": ["MainViewModel", "expense tracker", "month filter", "transaction aggregation", "Kotlin Coroutines", "StateFlow", "InMemoryTransactionsRepository", "CategoriesRepository"], "state": 2, "file_id": 28, "knowledge_revision": 65, "git_revision": "", "hash": "b79051ca14279230e7842847033eadbf", "format-version": 4, "code-base-name": "kotlin-expense-tracker", "filename": "app/src/main/java/com/example/kotlinexpensetracker/MainViewModel.kt", "revision_history": [{"65": ""}]}